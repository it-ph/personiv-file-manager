{"version":3,"sources":["admin.module.js","admin.routes.js","controllers/category-content-container.controller.js","controllers/main-content-container.controller.js","controllers/dialogs/add-category-dialog.controller.js","controllers/dialogs/add-document-dialog.controller.js","controllers/dialogs/change-password-dialog.controller.js"],"names":[],"mappings":"AAAA;AACA;AACA;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"admin.js","sourcesContent":["var adminModule = angular.module('admin', [\r\n\t'sharedModule',\r\n]);","adminModule\r\n\t.config(['$stateProvider',function($stateProvider) {\r\n\t\t$stateProvider\r\n\t\t\t.state('main', {\r\n\t\t\t\turl:'/',\r\n\t\t\t\tviews: {\r\n\t\t\t\t\t'': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/main.view.html',\r\n\t\t\t\t\t\tcontroller: 'mainViewController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content-container@main': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t\t\t\tcontroller: 'mainContentContainerController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content@main': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/main-content.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'toolbar@main': {\r\n\t\t\t\t\t\ttemplateUrl:'/app/shared/templates/toolbar.template.html',\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\t.state('main.category', {\r\n\t\t\t\turl:'category/{categoryID}',\r\n\t\t\t\tparams: {'categoryID':null},\r\n\t\t\t\tviews: {\r\n\t\t\t\t\t'content-container': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t\t\t\tcontroller: 'categoryContentContainerController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content@main.category': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/category-content.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'toolbar@main.category': {\r\n\t\t\t\t\t\ttemplateUrl:'/app/shared/templates/toolbar.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t}]);","adminModule\r\n\t.controller('categoryContentContainerController', ['$scope', '$state', '$stateParams', '$mdDialog', 'Category', 'Document', 'Preloader', function($scope, $state, $stateParams, $mdDialog, Category, Document, Preloader){\r\n\t\tvar categoryID = $stateParams.categoryID;\r\n\t\t/**\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\t\t$scope.toolbar.showBack = true;\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.document.show = false;\r\n\t\t\tPreloader.loading();\r\n\t\t\tDocument.search($scope.toolbar)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.document.results = data;\r\n\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tPreloader.error();\r\n\t\t\t\t});\r\n\t\t};\r\n\r\n\t\tCategory.show(categoryID)\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.category = data;\r\n\t\t\t\t$scope.toolbar.childState = data.name;\r\n\t\t\t})\r\n\t\t\t.error(function(){\r\n\t\t\t\tPreloader.error();\r\n\t\t\t});\r\n\r\n\t\t$scope.document = {};\r\n\t\t$scope.document.paginated = [];\r\n\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t$scope.document.page = 2;\r\n\r\n\t\tDocument.paginateCategory(categoryID)\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.document.details = data;\r\n\t\t\t\t$scope.document.paginated = data.data;\r\n\t\t\t\t$scope.document.show = true;\r\n\r\n\t\t\t\t$scope.document.paginateLoad = function(){\r\n\t\t\t\t\t// kills the function if ajax is busy or pagination reaches last page\r\n\t\t\t\t\tif($scope.document.busy || ($scope.document.page > $scope.document.details.last_page)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Executes pagination call\r\n\t\t\t\t\t *\r\n\t\t\t\t\t*/\r\n\t\t\t\t\t// sets to true to disable pagination call if still busy.\r\n\t\t\t\t\t$scope.document.busy = true;\r\n\r\n\t\t\t\t\tDocument.paginateCategory(categoryID, $scope.document.page)\r\n\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t// increment to call the next page for the next call\r\n\t\t\t\t\t\t\t$scope.document.page++;\r\n\t\t\t\t\t\t\t// iterate over the paginated data and push it to the original array\r\n\t\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\t\t$scope.document.paginated.push(item);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t// Enables again the pagination call for next call.\r\n\t\t\t\t\t\t\t$scope.report.busy = false;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tPreloader.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.error(function(){\r\n\t\t\t\tPreloader.error();\r\n\t\t\t});\t\r\n\r\n\t\t$scope.refresh = function(){\r\n        \tPreloader.loading();\r\n\t\t\t$scope.toolbar.userInput = '';\r\n\t\t\t\r\n\t\t\t$scope.document = {};\r\n\t\t\t$scope.document.show = false;\r\n\t\t\t$scope.document.paginated = [];\r\n\t\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t\t$scope.document.page = 2;\r\n\r\n\t\t\tDocument.paginateCategory(categoryID)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.document.details = data;\r\n\t\t\t\t\t$scope.document.paginated = data.data;\r\n\t\t\t\t\t$scope.document.show = true;\r\n\t\t\t\t\t/* stops both preloader*/\r\n\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tPreloader.error();\r\n\t\t\t\t});\r\n\t\t};\r\n\r\n\t\t$scope.fab = {};\r\n\r\n\t\t$scope.fab.show = true;\r\n\t\t$scope.fab.icon = 'mdi-plus';\r\n\t\t$scope.fab.label = 'File';\r\n\t\t$scope.fab.action = function(){\r\n\t\t\t$mdDialog.show({\r\n\t\t    \tcontroller: 'addDocumentDialogController',\r\n\t\t      \ttemplateUrl: '/app/components/admin/templates/dialogs/add-document-dialog.template.html',\r\n\t\t      \tparent: angular.element(document.body),\r\n\t\t    })\r\n\t        .then(function() {\r\n\t          \t$scope.refresh();\r\n\t        });\r\n\t\t};\t\r\n\r\n\t\t$scope.openFile = function(id){\r\n\t\t\tvar win = window.open('/document-view/' + id);\r\n\t\t\twin.focus();\r\n\t\t}\r\n\t}]);","adminModule\r\n\t.controller('mainContentContainerController', ['$scope', '$state', '$mdDialog', 'Category', 'Document', 'Preloader', function($scope, $state, $mdDialog, Category, Document, Preloader){\r\n\t\t$scope.show = {};\r\n\t\t\r\n\t\t// Init the content of the page\r\n\t\tCategory.index()\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.categories = data;\r\n\t\t\t\t$scope.show.categories = true;\r\n\t\t\t})\r\n\t\t\t.error(function(){\r\n\t\t\t\tPreloader.error();\r\n\t\t\t});\r\n\r\n\t\t$scope.refresh = function(){\r\n\t\t\t$scope.toolbar.userInput = '';\r\n\t\t\t$scope.show.categories = false;\r\n\t\t\t$scope.categories = [];\r\n        \tPreloader.loading();\r\n\t\t\tCategory.index()\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.categories = data;\r\n\t\t\t\t\t$scope.show.categories = true;\r\n\t\t\t\t\t/* stops both preloader*/\r\n\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tPreloader.error();\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\t\t$scope.toolbar.childState = 'Home';\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.show.categories = false;\r\n\t\t\tPreloader.loading();\r\n\t\t\tDocument.search($scope.toolbar)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.results = data;\r\n\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tPreloader.error();\r\n\t\t\t\t});\r\n\t\t};\r\n\r\n\t\t$scope.fab = {};\r\n\r\n\t\t$scope.fab.show = true;\r\n\t\t$scope.fab.icon = 'mdi-plus';\r\n\t\t$scope.fab.label = 'Category';\r\n\t\t$scope.fab.action = function(){\r\n\t\t\t$mdDialog.show({\r\n\t\t    \tcontroller: 'addCategoryDialogController',\r\n\t\t      \ttemplateUrl: '/app/components/admin/templates/dialogs/add-category-dialog.template.html',\r\n\t\t      \tparent: angular.element(document.body),\r\n\t\t    })\r\n\t        .then(function() {\r\n\t          \t$scope.refresh();\r\n\t        });\r\n\t\t};\t\r\n\r\n\t\t$scope.viewCategory = function(id){\r\n\t\t\t$state.go('main.category', {'categoryID': id});\r\n\t\t};\r\n\r\n\t\t$scope.openFile = function(id){\r\n\t\t\tvar win = window.open('/document-view/' + id);\r\n\t\t\twin.focus();\r\n\t\t}\r\n\t}]);","adminModule\r\n\t.controller('addCategoryDialogController', ['$scope', '$mdDialog', 'Category', 'Preloader', function($scope, $mdDialog, Category, Preloader){\r\n\t\t$scope.category = {};\r\n\t\tvar busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\t$mdDialog.cancel();\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.addCategoryForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.addCategoryForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t/* Starts Preloader */\r\n\t\t\t\tPreloader.loading();\r\n\t\t\t\t/**\r\n\t\t\t\t * Stores Single Record\r\n\t\t\t\t*/\r\n\t\t\t\tif(!busy){\r\n\t\t\t\t\tbusy = true;\r\n\t\t\t\t\tCategory.store($scope.category)\r\n\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t// Stops Preloader \r\n\t\t\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\t\t\tbusy = false;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tPreloader.error()\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","adminModule\r\n\t.controller('addDocumentDialogController', ['$scope', '$stateParams', '$mdDialog', 'FileUploader', 'Document', 'Preloader', function($scope, $stateParams, $mdDialog, FileUploader, Document, Preloader){\r\n\t\t$scope.document = {};\r\n\t\t$scope.document.category_id = $stateParams.categoryID;\r\n\t\t$scope.document.tags = [];\r\n\r\n\t\tvar busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\t$mdDialog.cancel();\r\n\t\t}\r\n\r\n\t\tvar uploader = {};\r\n\r\n\t\tuploader.filter = {\r\n            name: 'imageFilter',\r\n            fn: function(item /*{File|FileLikeObject}*/, options) {\r\n                var type = '|' + item.type.slice(item.type.lastIndexOf('/') + 1) + '|';\r\n                return '|pdf|'.indexOf(type) !== -1;\r\n            }\r\n        };\r\n\r\n        uploader.error = function(item /*{File|FileLikeObject}*/, filter, options) {\r\n            $scope.fileError = true;\r\n            $scope.pdfUploader.queue = [];\r\n        };\r\n\r\n        uploader.headers = { 'X-CSRF-TOKEN': document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')};\r\n\r\n\t\t/* Question Uploader */\r\n\t\t$scope.pdfUploader = new FileUploader({\r\n\t\t\turl: '/document-upload',\r\n\t\t\theaders: uploader.headers,\r\n\t\t\tqueueLimit : 1\r\n\t\t})\r\n\t\t// FILTERS\r\n        $scope.pdfUploader.filters.push(uploader.filter);\r\n        \r\n\t\t$scope.pdfUploader.onWhenAddingFileFailed = uploader.error;\r\n\t\t$scope.pdfUploader.onAfterAddingFile  = function(){\r\n\t\t\t$scope.fileError = false;\r\n\t\t};\r\n        \r\n\t\t$scope.submit = function(){\r\n\t\t\t$scope.showErrors = true;\r\n\t\t\tif($scope.addDocumentForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.addDocumentForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tif(!busy && $scope.pdfUploader.queue.length){\r\n\t\t\t\t\tbusy = true;\r\n\t\t\t\t\t/* Starts Preloader */\r\n\t\t\t\t\tPreloader.saving();\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Stores Single Record\r\n\t\t\t\t\t*/\r\n\t\t\t\t\tDocument.store($scope.document)\r\n\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t$scope.pdfUploader.uploadAll();\r\n\t\t\t\t\t\t\t// Stops Preloader \r\n\t\t\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\t\t\tbusy = false;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tPreloader.error()\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}]);","adminModule\r\n\t.controller('changePasswordDialogController', ['$scope', '$mdDialog', 'User', 'Preloader', function($scope, $mdDialog, User, Preloader){\r\n\t\t$scope.password = {};\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\t$mdDialog.cancel();\r\n\t\t}\r\n\r\n\t\t$scope.checkPassword = function(){\r\n\t\t\tUser.checkPassword($scope.password)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.match = data;\r\n\t\t\t\t\t$scope.show = true;\r\n\t\t\t\t\tconsole.log($scope.match);\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\t$scope.showErrors = true;\r\n\t\t\tif($scope.changePasswordForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.changePasswordForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse if($scope.password.old == $scope.password.new || $scope.password.new != $scope.password.confirm)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tPreloader.saving();\r\n\r\n\t\t\t\tUser.changePassword($scope.password)\r\n\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\tPreloader.error();\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}]);"],"sourceRoot":"/source/"}