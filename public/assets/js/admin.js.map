{"version":3,"sources":["admin.module.js","admin.routes.js","controllers/category-content-container.controller.js","controllers/main-content-container.controller.js","controllers/settings-content-container.controller.js","controllers/dialogs/add-category-dialog.controller.js","controllers/dialogs/add-document-dialog.controller.js","controllers/dialogs/change-password-dialog.controller.js","controllers/dialogs/create-group-dialog.controller.js","controllers/dialogs/create-user-dialog.controller.js","controllers/dialogs/edit-category-dialog.controller.js","controllers/dialogs/edit-document-dialog.controller.js","controllers/dialogs/edit-group-dialog.controller.js"],"names":[],"mappings":"AAAA;AACA;AACA;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"admin.js","sourcesContent":["var adminModule = angular.module('admin', [\r\n\t'sharedModule',\r\n]);","adminModule\r\n\t.config(['$stateProvider',function($stateProvider) {\r\n\t\t$stateProvider\r\n\t\t\t.state('main', {\r\n\t\t\t\turl:'/',\r\n\t\t\t\tviews: {\r\n\t\t\t\t\t'': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/main.view.html',\r\n\t\t\t\t\t\tcontroller: 'mainViewController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content-container@main': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t\t\t\tcontroller: 'mainContentContainerController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content@main': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/components/admin/templates/content/main-content.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'toolbar@main': {\r\n\t\t\t\t\t\ttemplateUrl:'/app/shared/templates/toolbar.template.html',\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\t.state('main.category', {\r\n\t\t\t\turl:'category/{categoryID}',\r\n\t\t\t\tparams: {'categoryID':null},\r\n\t\t\t\tviews: {\r\n\t\t\t\t\t'content-container': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t\t\t\tcontroller: 'categoryContentContainerController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content@main.category': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/category-content.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'toolbar@main.category': {\r\n\t\t\t\t\t\ttemplateUrl:'/app/shared/templates/toolbar.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\t.state('main.settings', {\r\n\t\t\t\turl:'settings',\r\n\t\t\t\tviews: {\r\n\t\t\t\t\t'content-container': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t\t\t\tcontroller: 'settingsContentContainerController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content@main.settings': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/components/admin/templates/content/settings-content.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'toolbar@main.settings': {\r\n\t\t\t\t\t\ttemplateUrl:'/app/shared/templates/toolbar.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t}]);","adminModule\r\n\t.controller('categoryContentContainerController', ['$scope', '$state', '$stateParams', '$mdDialog', 'Category', 'Document', 'Preloader', 'User', function($scope, $state, $stateParams, $mdDialog, Category, Document, Preloader, User){\r\n\t\tvar categoryID = $stateParams.categoryID;\r\n\t\t/**\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\t\t$scope.toolbar.showBack = true;\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.document.show = false;\r\n\t\t\tPreloader.loading();\r\n\t\t\tDocument.search($scope.toolbar)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.document.results = data;\r\n\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tPreloader.error();\r\n\t\t\t\t});\r\n\t\t};\r\n\r\n\t\tCategory.show(categoryID)\r\n\t\t\t.success(function(data){\r\n\t\t\t\tif(data.groups.length){\r\n\t\t\t\t\tvar groups = [];\r\n\r\n\t\t\t\t\tangular.forEach(data.groups, function(item){\r\n\t\t\t\t\t\tgroups.push(item.id);\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tUser.checkFileAccess(groups)\r\n\t\t\t\t\t\t.success(function(allowed){\r\n\t\t\t\t\t\t\tif(!allowed){\r\n\t\t\t\t\t\t\t\t$state.go('page-not-found');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$scope.category = data;\r\n\t\t\t\t$scope.toolbar.childState = data.name;\r\n\t\t\t})\r\n\t\t\t.error(function(){\r\n\t\t\t\tPreloader.error();\r\n\t\t\t});\r\n\r\n\t\t$scope.document = {};\r\n\t\t$scope.document.paginated = [];\r\n\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t$scope.document.page = 2;\r\n\r\n\t\tDocument.paginateCategory(categoryID)\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.document.details = data;\r\n\t\t\t\t$scope.document.paginated = data.data;\r\n\t\t\t\t$scope.document.show = true;\r\n\r\n\t\t\t\t$scope.document.paginateLoad = function(){\r\n\t\t\t\t\t// kills the function if ajax is busy or pagination reaches last page\r\n\t\t\t\t\tif($scope.document.busy || ($scope.document.page > $scope.document.details.last_page)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Executes pagination call\r\n\t\t\t\t\t *\r\n\t\t\t\t\t*/\r\n\t\t\t\t\t// sets to true to disable pagination call if still busy.\r\n\t\t\t\t\t$scope.document.busy = true;\r\n\r\n\t\t\t\t\tDocument.paginateCategory(categoryID, $scope.document.page)\r\n\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t// increment to call the next page for the next call\r\n\t\t\t\t\t\t\t$scope.document.page++;\r\n\t\t\t\t\t\t\t// iterate over the paginated data and push it to the original array\r\n\t\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\t\t$scope.document.paginated.push(item);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t// Enables again the pagination call for next call.\r\n\t\t\t\t\t\t\t$scope.report.busy = false;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tPreloader.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.error(function(){\r\n\t\t\t\tPreloader.error();\r\n\t\t\t});\t\r\n\r\n\t\t$scope.refresh = function(){\r\n        \tPreloader.loading();\r\n\t\t\t$scope.toolbar.userInput = '';\r\n\t\t\t\r\n\t\t\t$scope.document = {};\r\n\t\t\t$scope.document.show = false;\r\n\t\t\t$scope.document.paginated = [];\r\n\t\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t\t$scope.document.page = 2;\r\n\r\n\t\t\tDocument.paginateCategory(categoryID)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.document.details = data;\r\n\t\t\t\t\t$scope.document.paginated = data.data;\r\n\t\t\t\t\t$scope.document.show = true;\r\n\t\t\t\t\t/* stops both preloader*/\r\n\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tPreloader.error();\r\n\t\t\t\t});\r\n\t\t};\r\n\r\n\t\t$scope.fab = {};\r\n\r\n\t\t$scope.fab.show = true;\r\n\t\t$scope.fab.icon = 'mdi-plus';\r\n\t\t$scope.fab.label = 'File';\r\n\t\t$scope.fab.action = function(){\r\n\t\t\t$mdDialog.show({\r\n\t\t    \tcontroller: 'addDocumentDialogController',\r\n\t\t      \ttemplateUrl: '/app/components/admin/templates/dialogs/add-document-dialog.template.html',\r\n\t\t      \tparent: angular.element(document.body),\r\n\t\t    })\r\n\t        .then(function() {\r\n\t          \t$scope.refresh();\r\n\t        });\r\n\t\t};\t\r\n\r\n\t\t$scope.openFile = function(id){\r\n\t\t\tvar win = window.open('/document-view/' + id + '/category/' + categoryID);\r\n\t\t\twin.focus();\r\n\t\t}\r\n\r\n\t\t$scope.edit = function(id){\r\n\t\t\tPreloader.set(id);\r\n\t\t\t$mdDialog.show({\r\n\t\t    \tcontroller: 'editDocumentDialogController',\r\n\t\t      \ttemplateUrl: '/app/components/admin/templates/dialogs/edit-document-dialog.template.html',\r\n\t\t      \tparent: angular.element(document.body),\r\n\t\t    })\r\n\t        .then(function() {\r\n\t          \t$scope.refresh();\r\n\t        });\r\n\t\t}\r\n\r\n\t\t$scope.delete = function(id){\r\n\t\t\tvar confirm = $mdDialog.confirm()\r\n\t\t        .title('Delete File')\r\n\t\t        .textContent('Are you sure you want to delete this file ?')\r\n\t\t        .ariaLabel('Delete File')\r\n\t\t        .ok('Delete')\r\n\t\t        .cancel('Cancel');\r\n\t\t    $mdDialog.show(confirm).then(function() {\r\n\t\t    \tPreloader.loading();\r\n\t\t    \tDocument.delete(id)\r\n\t\t    \t\t.success(function(){\r\n\t\t    \t\t\tPreloader.stop();\r\n\t\t    \t\t\t$scope.refresh();\r\n\t\t    \t\t})\r\n\t\t    \t\t.error(function(){\r\n\t\t    \t\t\tPreloader.error();\r\n\t\t    \t\t});\r\n\t\t    }, function() {\r\n\t\t    \treturn;\r\n\t\t    });\r\n\t\t}\r\n\t}]);","adminModule\r\n\t.controller('mainContentContainerController', ['$scope', '$state', '$mdDialog', 'Category', 'Document', 'Preloader', 'User', function($scope, $state, $mdDialog, Category, Document, Preloader, User){\r\n\t\t$scope.show = {};\r\n\t\t\r\n\t\t$scope.refresh = function(){\r\n\t\t\t$scope.toolbar.userInput = '';\r\n        \tPreloader.loading();\r\n\t\t\t$scope.init(true);\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\t\t$scope.toolbar.childState = 'Home';\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.show.categories = false;\r\n\t\t\tPreloader.loading();\r\n\t\t\tDocument.search($scope.toolbar)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.results = data;\r\n\t\t\t\t\tangular.forEach(data, function(item){\r\n\t\t\t\t\t\titem.charLimit = 35;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tPreloader.error();\r\n\t\t\t\t});\r\n\t\t};\r\n\r\n\t\t$scope.fab = {};\r\n\r\n\t\t$scope.fab.show = true;\r\n\t\t$scope.fab.icon = 'mdi-plus';\r\n\t\t$scope.fab.label = 'Category';\r\n\t\t$scope.fab.action = function(){\r\n\t\t\t$mdDialog.show({\r\n\t\t    \tcontroller: 'addCategoryDialogController',\r\n\t\t      \ttemplateUrl: '/app/components/admin/templates/dialogs/add-category-dialog.template.html',\r\n\t\t      \tparent: angular.element(document.body),\r\n\t\t    })\r\n\t        .then(function() {\r\n\t          \t$scope.refresh();\r\n\t        });\r\n\t\t};\t\r\n\r\n\t\t$scope.viewCategory = function(id){\r\n\t\t\t$state.go('main.category', {'categoryID': id});\r\n\t\t};\r\n\r\n\t\t$scope.openFile = function(id, categoryID){\r\n\t\t\tvar win = window.open('/document-view/' + id + '/category/' + categoryID);\r\n\t\t\twin.focus();\r\n\t\t}\r\n\r\n\t\t$scope.viewDescription = function(data){\r\n\t\t\t$mdDialog.show(\r\n\t\t\t    $mdDialog.alert()\r\n\t\t\t    \t.parent(angular.element(document.body))\r\n\t\t\t        .clickOutsideToClose(true)\r\n\t\t\t        .title('Description')\r\n\t\t\t        .textContent(data)\r\n\t\t\t        .ariaLabel('Description')\r\n\t\t\t        .ok('Okay')\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t$scope.editFolder = function(id){\r\n\t\t\tPreloader.set(id);\r\n\t\t\t$mdDialog.show({\r\n\t\t    \tcontroller: 'editCategoryDialogController',\r\n\t\t      \ttemplateUrl: '/app/components/admin/templates/dialogs/add-category-dialog.template.html',\r\n\t\t      \tparent: angular.element(document.body),\r\n\t\t    })\r\n\t        .then(function() {\r\n\t          \t$scope.refresh();\r\n\t        });\r\n\t\t}\r\n\r\n\t\t$scope.edit = function(id){\r\n\t\t\tPreloader.set(id);\r\n\t\t\t$mdDialog.show({\r\n\t\t    \tcontroller: 'editDocumentDialogController',\r\n\t\t      \ttemplateUrl: '/app/components/admin/templates/dialogs/edit-document-dialog.template.html',\r\n\t\t      \tparent: angular.element(document.body),\r\n\t\t    })\r\n\t        .then(function() {\r\n\t          \t$scope.refresh();\r\n\t        });\r\n\t\t}\r\n\r\n\t\t$scope.delete = function(id){\r\n\t\t\tvar confirm = $mdDialog.confirm()\r\n\t\t        .title('Delete File')\r\n\t\t        .textContent('Are you sure you want to delete this file ?')\r\n\t\t        .ariaLabel('Delete File')\r\n\t\t        .ok('Delete')\r\n\t\t        .cancel('Cancel');\r\n\t\t    $mdDialog.show(confirm).then(function() {\r\n\t\t    \tPreloader.loading();\r\n\t\t    \tDocument.delete(id)\r\n\t\t    \t\t.success(function(){\r\n\t\t    \t\t\tPreloader.stop();\r\n\t\t    \t\t\t$scope.refresh();\r\n\t\t    \t\t})\r\n\t\t    \t\t.error(function(){\r\n\t\t    \t\t\tPreloader.error();\r\n\t\t    \t\t});\r\n\t\t    }, function() {\r\n\t\t    \treturn;\r\n\t\t    });\r\n\t\t}\r\n\r\n\t\t// Init the content of the page\r\n\t\t$scope.init = function(refresh){\r\n\t\t\tUser.index()\r\n\t\t\t\t.then(function(data){\r\n\t\t\t\t\t$scope.user = data.data;\r\n\t\t\t\t\t\r\n\t\t\t\t\t$scope.groups = [];\r\n\r\n\t\t\t\t\tangular.forEach($scope.user.groups, function(group){\r\n\t\t\t\t\t\t$scope.groups.push(group.id);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn $scope.groups;\r\n\t\t\t\t})\r\n\t\t\t\t.then(function(groups){\r\n\t\t\t\t\tCategory.index()\r\n\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t$scope.public = data;\r\n\t\t\t\t\t\t\t$scope.show.categories = true;\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\tCategory.userGroups($scope.groups)\r\n\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t$scope.private = data;\r\n\r\n\t\t\t\t\t\t\tif(refresh){\r\n\t\t\t\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tPreloader.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.init();\r\n\t}]);","adminModule\r\n\t.controller('settingsContentContainerController', ['$scope', '$state', '$mdDialog', 'Preloader', 'Group', 'User', function($scope, $state, $mdDialog, Preloader, Group, User){\r\n\t\t/**\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\t\t$scope.toolbar.childState = 'Settings';\r\n\r\n\t\t$scope.refresh = function(){\r\n\t\t\tPreloader.loading();\r\n\t\t\t$scope.init(true);\r\n\t\t}\r\n\r\n\t\t$scope.createGroup = function(){\r\n\t\t\t$mdDialog.show({\r\n\t\t    \tcontroller: 'createGroupDialogController',\r\n\t\t      \ttemplateUrl: '/app/components/admin/templates/dialogs/group-dialog.template.html',\r\n\t\t      \tparent: angular.element(document.body),\r\n\t\t    })\r\n\t        .then(function(){\r\n\t        \t$scope.refresh();\r\n\t        }, function() {\r\n\t        \treturn;\r\n\t        });\r\n\t\t}\r\n\r\n\t\t$scope.editGroup = function(id){\r\n\t\t\tPreloader.set(id);\r\n\t\t\t$mdDialog.show({\r\n\t\t    \tcontroller: 'editGroupDialogController',\r\n\t\t      \ttemplateUrl: '/app/components/admin/templates/dialogs/group-dialog.template.html',\r\n\t\t      \tparent: angular.element(document.body),\r\n\t\t    })\r\n\t        .then(function(){\r\n\t        \t$scope.refresh();\r\n\t        }, function() {\r\n\t        \treturn;\r\n\t        });\r\n\t\t}\r\n\r\n\t\t$scope.deleteGroup = function(id){\r\n\t\t\tvar confirm = $mdDialog.confirm()\r\n\t\t        .title('Delete Group')\r\n\t\t        .textContent('This group will be removed permanently.')\r\n\t\t        .ariaLabel('Delete Group')\r\n\t\t        .ok('Delete')\r\n\t\t        .cancel('Cancel');\r\n\r\n\t\t    $mdDialog.show(confirm)\r\n\t\t    \t.then(function() {\r\n\t\t\t    \tGroup.delete(id)\r\n\t\t\t    \t\t.success(function(){\r\n\t\t\t    \t\t\t$scope.refresh();\r\n\t\t\t    \t\t\tPreloader.deleted();\r\n\t\t\t    \t\t})\r\n\t\t\t    \t\t.error(function(){\r\n\t\t\t    \t\t\tPreloader.error();\r\n\t\t\t    \t\t});\r\n\t\t\t    }, function() {\r\n\t\t\t    \treturn;\r\n\t\t\t    });\r\n\t\t}\t\r\n\r\n\t\t$scope.createUser = function(){\r\n\t\t\t$mdDialog.show({\r\n\t\t    \tcontroller: 'createUserDialogController',\r\n\t\t      \ttemplateUrl: '/app/components/admin/templates/dialogs/create-user-dialog.template.html',\r\n\t\t      \tparent: angular.element(document.body),\r\n\t\t    })\r\n\t        .then(function(){\r\n\t        \t$scope.refresh();\r\n\t        }, function() {\r\n\t        \treturn;\r\n\t        });\r\n\t\t}\r\n\r\n\t\t$scope.resetPassword = function(id){\r\n\t\t\tvar confirm = $mdDialog.confirm()\r\n\t\t        .title('Reset Password')\r\n\t\t        .textContent('Reset the password for this account?')\r\n\t\t        .ariaLabel('Reset Password')\r\n\t\t        .ok('Reset')\r\n\t\t        .cancel('Cancel');\r\n\r\n\t\t    $mdDialog.show(confirm)\r\n\t\t    \t.then(function() {\r\n\t\t\t    \tUser.resetPassword(id)\r\n\t\t\t    \t\t.success(function(){\r\n\t\t\t    \t\t\tPreloader.toastChangesSaved();\r\n\t\t\t    \t\t})\r\n\t\t\t    \t\t.error(function(){\r\n\t\t\t    \t\t\tPreloader.error();\r\n\t\t\t    \t\t});\r\n\t\t\t    }, function() {\r\n\t\t\t    \treturn;\r\n\t\t\t    });\r\n\t\t}\r\n\r\n\t\t$scope.deleteAccount = function(id){\r\n\t\t\tvar confirm = $mdDialog.confirm()\r\n\t\t        .title('Delete Account')\r\n\t\t        .textContent('This account will be removed permanently.')\r\n\t\t        .ariaLabel('Delete Account')\r\n\t\t        .ok('Delete')\r\n\t\t        .cancel('Cancel');\r\n\r\n\t\t    $mdDialog.show(confirm)\r\n\t\t    \t.then(function() {\r\n\t\t\t    \tUser.delete(id)\r\n\t\t\t    \t\t.success(function(){\r\n\t\t\t    \t\t\t$scope.refresh();\r\n\t\t\t    \t\t\tPreloader.deleted();\r\n\t\t\t    \t\t})\r\n\t\t\t    \t\t.error(function(){\r\n\t\t\t    \t\t\tPreloader.error();\r\n\t\t\t    \t\t});\r\n\t\t\t    }, function() {\r\n\t\t\t    \treturn;\r\n\t\t\t    });\r\n\t\t}\r\n\r\n\t\t$scope.init = function(refresh){\r\n\t\t\tUser.index()\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\tif(data.role != 'super-admin'){\r\n\t\t\t\t\t\t$state.go('page-not-found');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.current_user = data;\r\n\t\t\t\t});\r\n\r\n\t\t\tGroup.index()\r\n\t\t\t\t.then(function(data){\r\n\t\t\t\t\t$scope.groups = data.data;\r\n\t\t\t\t})\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tUser.others()\r\n\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t$scope.users = data;\r\n\r\n\t\t\t\t\t\t\tif(refresh){\r\n\t\t\t\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tPreloader.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\tPreloader.error();\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.init();\r\n\t}]);","adminModule\r\n\t.controller('addCategoryDialogController', ['$scope', '$mdDialog', 'Category', 'Preloader', 'User', 'CategoryGroup', function($scope, $mdDialog, Category, Preloader, User, CategoryGroup){\r\n\t\t$scope.category = {};\r\n\t\t$scope.category.groups = [];\r\n\t\tUser.index()\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.groups = data.groups;\r\n\t\t\t});\r\n\r\n\t\tvar busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\t$mdDialog.cancel();\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.addCategoryForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.addCategoryForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t/* Starts Preloader */\r\n\t\t\t\t// Preloader.loading();\r\n\t\t\t\t/**\r\n\t\t\t\t * Stores Single Record\r\n\t\t\t\t*/\r\n\t\t\t\tif(!busy){\r\n\t\t\t\t\tif(($scope.private && $scope.category.groups.length) || (!$scope.private && !$scope.category.groups.length)){\r\n\t\t\t\t\t\tbusy = true;\r\n\t\t\t\t\t\tCategory.store($scope.category)\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\tif(data){\r\n\t\t\t\t\t\t\t\t\tangular.forEach($scope.category.groups, function(item){\r\n\t\t\t\t\t\t\t\t\t\titem.category_id = data;\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\tCategoryGroup.store($scope.category.groups)\r\n\t\t\t\t\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t// Stops Preloader \r\n\t\t\t\t\t\t\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\t\t\t\t\t\t\tbusy = false;\t\t\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t// Stops Preloader \r\n\t\t\t\t\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\t\t\t\t\tbusy = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\tPreloader.error()\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\t$scope.show = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","adminModule\r\n\t.controller('addDocumentDialogController', ['$scope', '$stateParams', '$mdDialog', 'FileUploader', 'Document', 'Preloader', function($scope, $stateParams, $mdDialog, FileUploader, Document, Preloader){\r\n\t\t$scope.document = {};\r\n\t\t$scope.document.category_id = $stateParams.categoryID;\r\n\t\t$scope.document.tags = [];\r\n\r\n\t\tvar busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\t$mdDialog.cancel();\r\n\t\t}\r\n\r\n\t\tvar uploader = {};\r\n\r\n\t\tuploader.filter = {\r\n            name: 'imageFilter',\r\n            fn: function(item /*{File|FileLikeObject}*/, options) {\r\n                var type = '|' + item.type.slice(item.type.lastIndexOf('/') + 1) + '|';\r\n                return '|pdf|'.indexOf(type) !== -1;\r\n            }\r\n        };\r\n\r\n        uploader.error = function(item /*{File|FileLikeObject}*/, filter, options) {\r\n            $scope.fileError = true;\r\n            $scope.pdfUploader.queue = [];\r\n        };\r\n\r\n        uploader.headers = { 'X-CSRF-TOKEN': document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')};\r\n\r\n\t\t/* Question Uploader */\r\n\t\t$scope.pdfUploader = new FileUploader({\r\n\t\t\turl: '/document-upload',\r\n\t\t\theaders: uploader.headers,\r\n\t\t\tqueueLimit : 1\r\n\t\t})\r\n\t\t// FILTERS\r\n        $scope.pdfUploader.filters.push(uploader.filter);\r\n        \r\n\t\t$scope.pdfUploader.onWhenAddingFileFailed = uploader.error;\r\n\t\t$scope.pdfUploader.onAfterAddingFile  = function(){\r\n\t\t\t$scope.fileError = false;\r\n\t\t};\r\n        \r\n\t\t$scope.submit = function(){\r\n\t\t\t$scope.showErrors = true;\r\n\t\t\tif($scope.addDocumentForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.addDocumentForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tif(!busy && $scope.pdfUploader.queue.length){\r\n\t\t\t\t\tbusy = true;\r\n\t\t\t\t\t/* Starts Preloader */\r\n\t\t\t\t\tPreloader.saving();\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Stores Single Record\r\n\t\t\t\t\t*/\r\n\t\t\t\t\tDocument.store($scope.document)\r\n\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t$scope.pdfUploader.uploadAll();\r\n\t\t\t\t\t\t\t// Stops Preloader \r\n\t\t\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\t\t\tbusy = false;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tPreloader.error()\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}]);","adminModule\r\n\t.controller('changePasswordDialogController', ['$scope', '$mdDialog', 'User', 'Preloader', function($scope, $mdDialog, User, Preloader){\r\n\t\t$scope.password = {};\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\t$mdDialog.cancel();\r\n\t\t}\r\n\r\n\t\t$scope.checkPassword = function(){\r\n\t\t\tUser.checkPassword($scope.password)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.match = data;\r\n\t\t\t\t\t$scope.show = true;\r\n\t\t\t\t\tconsole.log($scope.match);\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\t$scope.showErrors = true;\r\n\t\t\tif($scope.changePasswordForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.changePasswordForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse if($scope.password.old == $scope.password.new || $scope.password.new != $scope.password.confirm)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tPreloader.saving();\r\n\r\n\t\t\t\tUser.changePassword($scope.password)\r\n\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\tPreloader.error();\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","adminModule\r\n\t.controller('createGroupDialogController', ['$scope', '$mdDialog', 'Group', 'GroupUser', 'Preloader', 'User', function($scope, $mdDialog, Group, GroupUser, Preloader, User){\r\n\t\t$scope.group = {};\r\n\t\t$scope.group.users = [];\r\n\t\tvar busy = false;\r\n\r\n\t\tUser.all()\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.users = data;\r\n\t\t\t});\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\t$scope.duplicate = false;\r\n\t\t\tGroup.checkDuplicate($scope.group)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\t$mdDialog.cancel();\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.createGroupForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.createGroupForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t/* Starts Preloader */\r\n\t\t\t\t// Preloader.loading();\r\n\t\t\t\t/**\r\n\t\t\t\t * Stores Single Record\r\n\t\t\t\t*/\r\n\t\t\t\t$scope.show = true;\r\n\t\t\t\tif(!busy && !$scope.duplicate && $scope.group.users.length){\r\n\t\t\t\t\tbusy = true;\r\n\t\t\t\t\tGroup.store($scope.group)\r\n\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\tbusy = false;\r\n\t\t\t\t\t\t\tif(!typeof(data) === 'string'){\r\n\t\t\t\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(typeof(data) === 'string'){\r\n\t\t\t\t\t\t\t\tangular.forEach($scope.group.users, function(item){\r\n\t\t\t\t\t\t\t\t\titem.group_id = data;\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\tGroupUser.store($scope.group.users)\r\n\t\t\t\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\t\t\tPreloader.error();\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tPreloader.error()\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","adminModule\r\n\t.controller('createUserDialogController', ['$scope', '$mdDialog', 'User', 'Preloader', function($scope, $mdDialog, User, Preloader){\r\n\t\t$scope.user = {};\r\n\t\t$scope.user.role = 'admin';\r\n\t\tvar busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\t$mdDialog.cancel();\r\n\t\t}\r\n\r\n\t\t$scope.checkEmail = function(){\r\n\t\t\t$scope.duplicate = false;\r\n\t\t\tUser.checkEmail($scope.user)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tPreloader.error();\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\t$scope.showErrors = true;\r\n\t\t\tif($scope.userForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.userForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse if($scope.user.password != $scope.user.password_confirmation || $scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif(!busy && !$scope.duplicate)\r\n\t\t\t\t{\r\n\t\t\t\t\t// Preloader.saving();\r\n\t\t\t\t\tbusy = true;\r\n\r\n\t\t\t\t\tUser.store($scope.user)\r\n\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\tif(!data){\r\n\t\t\t\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\t\t\t\tbusy = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tPreloader.error();\r\n\t\t\t\t\t\t\tbusy = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","adminModule\r\n\t.controller('editCategoryDialogController', ['$scope', '$mdDialog', 'Category', 'Preloader', 'User', 'CategoryGroup', function($scope, $mdDialog, Category, Preloader, User, CategoryGroup){\r\n\t\tvar categoryID = Preloader.get();\r\n\r\n\t\tUser.index()\r\n\t\t\t.then(function(data){\r\n\t\t\t\t$scope.groups = data.data.groups;\r\n\r\n\t\t\t\treturn data.data;\r\n\t\t\t})\r\n\t\t\t.then(function(groups){\r\n\t\t\t\t// console.log(groups);\r\n\t\t\t\tCategory.show(categoryID)\r\n\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t$scope.private = data.groups.length ? true : false;\r\n\t\t\t\t\t\t$scope.category = data;\r\n\t\t\t\t\t\t$scope.category.groups = [];\r\n\r\n\t\t\t\t\t\tangular.forEach($scope.groups, function(item, key){\r\n\t\t\t\t\t\t\t$scope.category.groups.push(null);\r\n\t\t\t\t\t\t\tCategoryGroup.relation(categoryID, item.id)\r\n\t\t\t\t\t\t\t\t.success(function(related){\r\n\t\t\t\t\t\t\t\t\tif(related){\r\n\t\t\t\t\t\t\t\t\t\t$scope.category.groups.splice(key, 1, item);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t})\r\n\r\n\t\t\r\n\t\tvar busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\t$mdDialog.cancel();\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.addCategoryForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.addCategoryForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t/* Starts Preloader */\r\n\t\t\t\t// Preloader.loading();\r\n\t\t\t\t/**\r\n\t\t\t\t * Stores Single Record\r\n\t\t\t\t*/\r\n\t\t\t\tif($scope.private){\r\n\t\t\t\t\t$scope.count = 0;\r\n\r\n\t\t\t\t\tangular.forEach($scope.category.groups, function(item){\r\n\t\t\t\t\t\tif(item){\r\n\t\t\t\t\t\t\t$scope.count++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif(!$scope.count){\r\n\t\t\t\t\t\t$scope.show = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!busy){;\r\n\t\t\t\t\tif(($scope.private && $scope.count) || (!$scope.private)){\r\n\t\t\t\t\t\tbusy = true;\r\n\t\t\t\t\t\tCategory.update(categoryID, $scope.category)\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\tif(data){\r\n\t\t\t\t\t\t\t\t\tif($scope.private){\r\n\t\t\t\t\t\t\t\t\t\tangular.forEach($scope.category.groups, function(item){\r\n\t\t\t\t\t\t\t\t\t\t\tif(item){\r\n\t\t\t\t\t\t\t\t\t\t\t\titem.category_id = data;\r\n\t\t\t\t\t\t\t\t\t\t\t\titem.include = true;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tCategoryGroup.update(categoryID, $scope.category.groups)\r\n\t\t\t\t\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t// Stops Preloader \r\n\t\t\t\t\t\t\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\t\t\t\t\t\t\tbusy = false;\t\t\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t// Stops Preloader \r\n\t\t\t\t\t\t\t\t\tbusy = false;\r\n\t\t\t\t\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\tPreloader.error()\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","adminModule\r\n\t.controller('editDocumentDialogController', ['$scope', '$stateParams', '$mdDialog', 'FileUploader', 'Document', 'Tag', 'Preloader', function($scope, $stateParams, $mdDialog, FileUploader, Document, Tag, Preloader){\r\n\t\tvar documentID = Preloader.get();\r\n\t\t$scope.document = {}\r\n\t\t// $scope.document.category_id = $stateParams.categoryID;\r\n\t\t$scope.document.tags = [];\r\n\t\t$scope.referenceTag = [];\r\n\r\n\t\tDocument.show(documentID)\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.document = data;\r\n\t\t\t\t$scope.document.tags = [];\r\n\t\t\t\t$scope.document.file_removed = false;\r\n\t\t\t\tTag.document(documentID)\r\n\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t$scope.tags = data;\r\n\t\t\t\t\t\tangular.forEach(data, function(item){\r\n\t\t\t\t\t\t\t$scope.document.tags.push(item.name);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t.error(function(){\r\n\t\t\t\tPreloader.error();\r\n\t\t\t});\r\n\r\n\t\t$scope.removeTag = function(idx){\r\n\t\t\t$scope.referenceTag.push($scope.tags[idx]);\r\n\t\t}\r\n\r\n\t\t$scope.removeFile = function(){\r\n\t\t\t$scope.document.file_removed = true;\r\n\t\t}\r\n\r\n\t\tvar busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\t$mdDialog.cancel();\r\n\t\t}\r\n\r\n\t\tvar uploader = {};\r\n\r\n\t\tuploader.filter = {\r\n            name: 'imageFilter',\r\n            fn: function(item /*{File|FileLikeObject}*/, options) {\r\n                var type = '|' + item.type.slice(item.type.lastIndexOf('/') + 1) + '|';\r\n                return '|pdf|'.indexOf(type) !== -1;\r\n            }\r\n        };\r\n\r\n        uploader.error = function(item /*{File|FileLikeObject}*/, filter, options) {\r\n            $scope.fileError = true;\r\n            $scope.pdfUploader.queue = [];\r\n        };\r\n\r\n        uploader.headers = { 'X-CSRF-TOKEN': document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')};\r\n\r\n\t\t/* Question Uploader */\r\n\t\t$scope.pdfUploader = new FileUploader({\r\n\t\t\turl: '/document-upload',\r\n\t\t\theaders: uploader.headers,\r\n\t\t\tqueueLimit : 1\r\n\t\t})\r\n\t\t// FILTERS\r\n        $scope.pdfUploader.filters.push(uploader.filter);\r\n        \r\n\t\t$scope.pdfUploader.onWhenAddingFileFailed = uploader.error;\r\n\t\t$scope.pdfUploader.onAfterAddingFile  = function(){\r\n\t\t\t$scope.fileError = false;\r\n\t\t};\r\n        \r\n\t\t$scope.submit = function(){\r\n\t\t\t$scope.showErrors = true;\r\n\t\t\tif($scope.addDocumentForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.addDocumentForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tif((!busy && $scope.pdfUploader.queue.length && $scope.document.file_removed) || (!busy && !$scope.document.file_removed)){\r\n\t\t\t\t\tbusy = true;\r\n\t\t\t\t\t/* Starts Preloader */\r\n\t\t\t\t\tPreloader.saving();\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Stores Single Record\r\n\t\t\t\t\t*/\r\n\t\t\t\t\tif($scope.referenceTag.length){\r\n\t\t\t\t\t\tangular.forEach($scope.referenceTag, function(item){\r\n\t\t\t\t\t\t\tTag.delete(item.id)\r\n\t\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\t\tPreloader.error;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tDocument.update(documentID, $scope.document)\r\n\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\tif($scope.pdfUploader.queue.length)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t$scope.pdfUploader.uploadAll();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// Stops Preloader \r\n\t\t\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\t\t\tbusy = false;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tPreloader.error()\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}]);","adminModule\r\n\t.controller('editGroupDialogController', ['$scope', '$mdDialog', 'Group', 'Preloader', 'User', 'GroupUser', function($scope, $mdDialog, Group, Preloader, User, GroupUser){\r\n\t\tvar groupID = Preloader.get();\r\n\t\tvar busy = false;\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\t$scope.duplicate = false;\r\n\t\t\tGroup.checkDuplicate($scope.group)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\t$mdDialog.cancel();\r\n\t\t}\r\n\r\n\r\n\t\tGroup.show(groupID)\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.group = data;\r\n\t\t\t\t$scope.group.users = [];\r\n\t\t\t\tvar count = 0;\r\n\t\t\t\t\r\n\t\t\t\tUser.all()\r\n\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t$scope.users = data;\r\n\r\n\t\t\t\t\t\tangular.forEach(data, function(user, idx){\r\n\t\t\t\t\t\t\t$scope.group.users.push(null);\r\n\t\t\t\t\t\t\tGroupUser.relation($scope.group.id, user.id)\r\n\t\t\t\t\t\t\t\t.success(function(related){\r\n\t\t\t\t\t\t\t\t\tif(related){\r\n\t\t\t\t\t\t\t\t\t\t$scope.group.users.splice(idx, 1, user);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\r\n\r\n\t\t\t})\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.createGroupForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.createGroupForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t/* Starts Preloader */\r\n\t\t\t\t// Preloader.loading();\r\n\t\t\t\t/**\r\n\t\t\t\t * Stores Single Record\r\n\t\t\t\t*/\r\n\t\t\t\t$scope.count = 0;\r\n\t\t\t\tangular.forEach($scope.group.users, function(item){\r\n\t\t\t\t\tif(item){\r\n\t\t\t\t\t\t$scope.count++;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(!$scope.count){\r\n\t\t\t\t\t$scope.show = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!busy && !$scope.duplicate && $scope.count){\r\n\t\t\t\t\tbusy = true;\r\n\t\t\t\t\tGroup.update(groupID, $scope.group)\r\n\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\tbusy = false;\r\n\t\t\t\t\t\t\tif(!typeof(data) === 'string'){\r\n\t\t\t\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(typeof(data) === 'string'){\r\n\t\t\t\t\t\t\t\tangular.forEach($scope.group.users, function(item){\r\n\t\t\t\t\t\t\t\t\tif(item){\r\n\t\t\t\t\t\t\t\t\t\titem.group_id = data;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\tGroupUser.update(groupID, $scope.group.users)\r\n\t\t\t\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t\t\t\tPreloader.stop();\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\t\t\tPreloader.error();\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tPreloader.error()\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}]);"],"sourceRoot":"/source/"}